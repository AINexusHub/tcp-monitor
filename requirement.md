
## 项目背景：
我们需要构建一个Web应用，用于分析和展示网络监控数据。核心功能是展示TCP连接的统计信息，帮助管理员快速了解网络活动情况，特别是那些有意义的、持续时间较长的连接。

### 数据表 `tcp_connections` 结构解析：

这张表记录了所有在本地服务器上发生的TCP连接的生命周期信息。

| 字段名               | 数据类型                 | 解释                                                    |
| :---------------- | :------------------- | :---------------------------------------------------- |
| `id`              | `serial4` (自增整数)     | **主键**。每条连接记录的唯一标识符。                                  |
| `local_ip`        | `varchar(45)`        | **本地IP地址**。发起或接受连接的本机IP地址。使用`varchar(45)`是为了兼容IPv6地址。 |
| `local_port`      | `int4` (整数)          | **本地端口**。本机上进行网络通信的端口号。                               |
| `remote_ip`       | `varchar(45)`        | **远程IP地址**。与本机建立连接的对端机器的IP地址。                         |
| `remote_port`     | `int4` (整数)          | **远程端口**。对端机器上进行通信的端口号。                               |
| `created_at`      | `timestamp`          | **连接建立时间**。TCP三次握手成功，连接正式建立的时刻。                       |
| `disconnected_at` | `timestamp` (可为NULL) | **连接断开时间**。TCP连接被正常关闭或异常断开的时间。如果连接仍然活跃，此字段为`NULL`。    |
| `last_active_at`  | `timestamp`          | **最后活跃时间**。连接上最后一次有数据包（如SYN, ACK, PSH, FIN等）传输的时间。    |

- 连接时长 = last_active_at - created_at`
## 功能需求

基于以上理解，我们需要实现以下具体功能：

1.  **核心数据展示：**
    - 页面上需一个表格，展示“本地IP+端口”的组合及其对应的“连接时长统计”。
    - **数据过滤：** 必须忽略所有连接时长小于5秒的记录。这需要在数据库查询层面实现，以减少不必要的数据传输和前端渲染。

2.  **时间范围搜索：**
    - 在表格上方，需要提供一个时间范围过滤器。
    - 用户可以输入开始时间和结束时间，点击查询后，表格只显示在该时间范围内建立（`created_at`）的连接数据。

## 技术架构与实现要求

这是一个典型的全栈开发任务，对架构和实现有明确要求：

1.  **整体架构：前后端分离**
    - **前端:** 负责UI展示、用户交互（如输入时间范围、点击搜索）和向后端发送HTTP请求。
    - **后端:** 负责业务逻辑处理、数据库交互、API接口提供，并向前端返回JSON格式的数据。

2.  **技术栈选择：**
    - **后端:** 语言不限。推荐使用 **Go** (高性能、适合云原生) 或 **Node.js (Express/NestJS)** (开发效率高)，也可以是 **Python (FastAPI/Flask)** 或 **Java (Spring Boot)**。**关键在于代码结构的清晰**。
    - **前端:** 必须使用 **Vue.js** 或 **React** 框架。
    - **数据库:** 根据提供表结构，使用 **PostgreSQL**。
    - **部署:** 必须在 **Kubernetes (K8s)** 环境中运行，演示环境可以使用 **Minikube**。

3.  **后端代码结构要求：**
    - **API层:** 负责接收和解析HTTP请求，调用业务逻辑层，并格式化响应结果。例如，定义API路由 `/api/connections`。
    - **DB层:** 负责所有与数据库的交互，如SQL查询、数据模型定义、数据库连接管理等。
    - **业务逻辑层:** 位于API层和DB层之间，是核心。它负责处理具体的业务规则，例如：
        - 组合`local_ip`和`local_port`。
        - **实现“连接时长小于5秒的记录忽略”这一核心逻辑。**
        - 计算最终的连接时长。
        - 处理时间范围过滤的参数。
        - **这一层的设计是考察重点，体现了你对代码组织和业务抽象的理解。**
